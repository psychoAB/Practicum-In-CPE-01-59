PACKAGE=practicum

SRCDIR=src
CLASSDIR=classes
LIBDIR=lib

BASEDIR=$(SRCDIR)/$(PACKAGE)
BASE_MCUBOARD=$(BASEDIR)/McuBoard.java
BASE_MCUWITHPERIBOARD=$(BASEDIR)/McuWithPeriBoard.java
BASE_TESTPERI=$(BASEDIR)/TestPeri.java
BASE_TESTUSB=$(BASEDIR)/TestUsb.java
BASE=$(BASE_MCUBOARD) $(BASE_MCUWITHPERIBOARD) $(BASE_TESTPERI) $(BASE_TESTUSB)

TARGETDIR=$(CLASSDIR)/$(PACKAGE)
TARGET_MCUBOARD=$(TARGETDIR)/McuBoard.class
TARGET_MCUWITHPERIBOARD=$(TARGETDIR)/McuWithPeriBoard.class
TARGET_TESTPERI=$(TARGETDIR)/TestPeri.class
TARGET_TESTUSB=$(TARGETDIR)/TestUsb.class
TARGET=$(TARGET_MCUBOARD) $(TARGET_MCUWITHPERIBOARD) $(TARGET_TESTPERI) $(TARGET_TESTUSB)

JAVAFLAGS=-cp $(CLASSDIR):$(LIBDIR)/*
JAVACFLAGS=-d $(CLASSDIR) -cp $(SRCDIR):$(LIBDIR)/*

all: $(TARGET)

clean:
	-rm -r $(CLASSDIR)/$(PACKAGE)

TestUsb: $(TARGET_TESTUSB)
	java $(JAVAFLAGS) $(PACKAGE).$@

TestPeri: $(TARGET_TESTPERI)
	java $(JAVAFLAGS) $(PACKAGE).$@

$(TARGET_MCUBOARD): $(BASE_MCUBOARD)
	javac $(JAVACFLAGS) $?

$(TARGET_MCUWITHPERIBOARD): $(BASE_MCUWITHPERIBOARD)
	javac $(JAVACFLAGS) $?

$(TARGET_TESTUSB): $(BASE_TESTUSB)
	javac $(JAVACFLAGS) $?

$(TARGET_TESTPERI): $(BASE_TESTPERI)
	javac $(JAVACFLAGS) $?
